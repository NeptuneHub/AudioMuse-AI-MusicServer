[supervisord]
nodaemon=true
user=root
logfile=/dev/null
logfile_maxbytes=0
pidfile=/var/run/supervisord.pid
silent=true

[program:music-server-backend]
command=/app/music-server
directory=/app
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
stdout_events_enabled=true
stderr_events_enabled=true
environment=PORT=8080

; Frontend now served by Go backend on port 8080
; [program:music-server-frontend]
; command=serve -s build -l 3000
; directory=/app/music-server-frontend
; autostart=true
; autorestart=true
; stdout_logfile=/dev/fd/1
; stdout_logfile_maxbytes=0
; stderr_logfile=/dev/fd/2
; stderr_logfile_maxbytes=0
; stdout_events_enabled=true
; stderr_events_enabled=true
; environment=PORT=3000